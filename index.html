<!DOCTYPE html>

<html>
<title> THE Note taking app</title>

</html>
<h1>THE Note taking app</h1>

<body>
  <p id='full_note'></p>
  <textarea id='note_text' rows="6" cols="60">
  </textarea>
  <input id='create_note' type='submit' name='Create note' value='Create note' onclick="createNote(); displayAll();">
</body>

<script src="./src/Note.js"></script>

<script>
  function createNote() {
    var note_text = document.getElementById("note_text").value;
    var note = new Note(note_text);
  }

  function clearDisplay() {
    if (document.getElementById('list')) {
      document.getElementById('list').outerHTML = "";
    }
  }

  function populateNoteList() {
    document.body.insertAdjacentHTML('beforeend', "<ol id = 'list' ></ol>");
    for (i = 0; i < Note.all.length; i++) {
      document.getElementById('list').insertAdjacentHTML('afterbegin',
        '<li><a href=#' + i + '>' + Note.all[i].summary() + '</a></li>');
    }
  }

  (function displaySelectedNote() {
    window.addEventListener("hashchange", showNoteForCurrentLink)
  })();

  function showNoteForCurrentLink() {
    showNote(getUrl(window.location));
  }

  function getUrl(location) {
    return location.hash.split('#')[1];
  };

  function showNote(note) {
    if (Note.all.length > 0) {
      document
        .getElementById('full_note')
        .innerHTML = Note.all[note].text
    }
  }

  function displayAll() {
    clearDisplay();
    populateNoteList();
  }
</script>
